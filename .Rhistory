subtitle = "Size indicates number of reviews",
y = "Trip Advisor mean rating",
x = "Google mean rating",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(4, 5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5, method = "lm") +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5,
method = "lm") +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent) +
scale_y_continuous(labels = percent) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings.png", height = 7, width = 11, units = "in")
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5, method = "lm") +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5,
method = "lm") +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent) +
scale_y_continuous(labels = percent) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 7, width = 11, units = "in")
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent) +
scale_y_continuous(labels = percent) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 7, width = 11, units = "in")
combined_google_trip |>
group_by(restaurant, source) |>
summarise(rating = mean(rating),
.groups = "drop") |>
pivot_wider(names_from = source,
values_from = rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5,
method = "lm") +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5,
method = "lm") +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
labs(title = "Comparison between Google and TripAdvisor restaurant ratings",
subtitle = "Size indicates number of reviews",
y = "Trip Advisor mean rating",
x = "Google mean rating",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_trip_google.png", height = 7, width = 11, units = "in")
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 9, width = 11, units = "in")
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 11, width = 11, units = "in")
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(4, 5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_size_continuous(breaks = c(100, 500, 1000, 2000)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_size_continuous(breaks = c(50, 100, 500, 1000, 2000)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_size_continuous(breaks = c(100, 500, 1000, 2000)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of positive reviews",
subtitle = "Size indicates number of reviews. A positive rating is a 4 or 5.",
y = "% of positive ratings, Trip Advisor",
x = "% of positive ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 9, width = 11, units = "in")
combined_google_trip |>
mutate(new_rating = ifelse(rating %in% c(5), 1, 0)) |>
group_by(restaurant, source) |>
summarise(new_rating = mean(new_rating),
.groups = "drop") |>
pivot_wider(names_from = "source",
values_from = new_rating) |>
left_join(
combined_google_trip |>
count(restaurant,
name = "count"),
by = "restaurant"
) |>
left_join(
combined_google_trip |>
distinct(restaurant, cuisine),
by = "restaurant"
) |>
filter(!is.na(Google) & !is.na(TripAdvisor)) |>
ggplot(aes(x = Google, y = TripAdvisor)) +
geom_smooth(alpha = .1, size = 0, span = .5) +
stat_smooth(geom = "line", alpha = .1, size =.5, span = .5) +
geom_point(aes(colour = cuisine,
size = count)) +
scale_colour_viridis_d(option = "turbo") +
ggrepel::geom_text_repel(aes(label = restaurant),
size = 1.2) +
xlim(0.2, .9) +
ylim(0.2, .9) +
scale_x_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_y_continuous(labels = percent, breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1)) +
scale_size_continuous(breaks = c(100, 500, 1000, 2000)) +
labs(title = "Comparison between Google and TripAdvisor using percentage of 5-star reviews",
subtitle = "Size indicates number of reviews.",
y = "% of 5-star ratings, Trip Advisor",
x = "% of 5-star ratings, Google",
colour = "Cuisine",
size = "Review count") +
# guides(colour = guide_legend(override.aes = list(size = .7))) +
theme(legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "lines"))
ggsave("./plots/restaurant_comparison_new_ratings2.png", height = 9, width = 11, units = "in")
